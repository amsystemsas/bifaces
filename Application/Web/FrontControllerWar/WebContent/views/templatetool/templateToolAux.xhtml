<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">

<f:view contentType="text/html">
    <h:head>
        <f:facet name="first">
            <meta content='text/html; charset=UTF-8' http-equiv="Content-Type"/>
            <title>Herramienta de Plantillas</title>
        </f:facet>
    </h:head>

    <h:body>
        <f:facet name="last">
            <h:outputStylesheet library="css" name="mystyle.css"  />
        </f:facet>
        <p:layout fullPage="true">
            <h:form id="form">
                <p:layoutUnit position="center">

                    <p:panelGrid style="margin:auto;margin-top:2%;width:1024px;">
                        <f:facet name="header">
                            <p:row>
                                <p:column colspan="4">HERRAMIENTA DE PLANTILLAS</p:column>
                            </p:row>
                            <p:row>
                                <!--Header de Plantilla-->
                                <p:column colspan="2">
                                    <p:menubar style="width:300px; border-style: none">
                                        <f:facet name="options" >
                                            <p:inputText  id="templName" label="templName" style="width: 195px;margin-right:2px;" placeholder="Template Name" value="#{templateTreeVO.propertyNode.name}"/>
                                            <p:commandButton value="Guardar" style="margin-right: 2px" action="#{templateTreeVO.addTemplate()}"
                                                             icon="ui-icon-plusthick" update="templateTree templName winMessageId"/>
                                        </f:facet>
                                    </p:menubar>
                                </p:column>
                                <!--Header de Propiedad-->
                                <p:column colspan="2">
                                    <p:menubar style="width: 354px; border-style: none">
                                        <f:facet name="options" >
                                            <p:inputText  id="propertyName" label="propertyName"   style="width:184px;margin-right:2px" placeholder="Property Name" value="#{propertySectionView.propertyName}"/>
                                            <p:commandButton value="Guardar" style="margin-right:2px" action="#{propertySectionView.addProperty()}"
                                                             icon="ui-icon-plusthick" update="propertyDT propertyName">
                                            </p:commandButton>
                                            <p:commandButton value="Buscar"/>
                                        </f:facet>
                                    </p:menubar>
                                </p:column>

                            </p:row>

                        </f:facet>

                        <p:row>
                            <!--Seccion del Arbol de Plantilla-->
                            <p:column style="font-weight: bold;">
                                <p:outputPanel style="width: 100%;height: 450px;overflow: auto;display: block">
                                    <p:tree id="templateTree" value="#{templateTreeVO.root}" var="tree"
                                            selectionMode="single"
                                            selection="#{templateTreeVO.selectedNode}">

                                        <p:treeNode>
                                            <h:outputText value="#{tree.name}"/>
                                        </p:treeNode>

                                        <p:treeNode type="TEMP" expandedIcon="ui-icon-folder-open" collapsedIcon="ui-icon-folder-collapsed">
                                            <h:outputText value="#{tree.name}"/>
                                        </p:treeNode>

                                        <p:treeNode type="PROP" icon="ui-icon-video">
                                            <h:outputText value="#{tree.name}" />
                                        </p:treeNode>
                                    </p:tree>
                                </p:outputPanel>
                            </p:column>

                            <!--Seccion de Botonera Plantillas - Propiedades -->
                            <p:column rowspan="2" style="font-weight: bold;">


                                <p:outputPanel style="width:100%;height:400px;overflow:auto;display: block">

                                    <p:commandButton value="Asociar" style="margin-bottom: 10px"
                                                     icon="ui-icon-plusthick" action="#{templateToolVO.associatePropertyTemplate()}"
                                                     update="templateTree templName winMessageId" />

                                    <p:commandButton value="Desasociar" action="#{templateToolVO.disassociatePropertyTemplate()}"
                                                     icon="ui-icon-minusthick" update="templateTree templName winMessageId"/>

                                    <p:commandButton value="Eliminar" style="margin-bottom: 10px" action="#{templateTreeVO.deleteTemplate()}"
                                                     icon="ui-icon-minusthick" update="templateTree templName winMessageId" />


                                </p:outputPanel>


                            </p:column>

                            <!--Seccion Tabla de Propiedades -->
                            <p:column colspan="2" rowspan="2">
                                <p:dataTable id="propertyDT" var="prop" value="#{propertySectionView.allProperty}"
                                             selection="#{propertySectionView.selectedProp}" selectionMode="single" rowKey="#{prop.name}"
                                             scrollable="true" scrollHeight="396">

                                    <p:column headerText="Propiedad">
                                        <h:outputText value="#{prop.name}" />
                                    </p:column>
                                    <p:column headerText="Tipo">
                                        <h:outputText value="#{prop.renderingTypeLabel}" />
                                    </p:column>

                                    <f:facet name="footer">
                                        <p:commandButton process="propertyDT" icon="ui-icon-search" update=":form:tabSetting" value="View" onclick="PF('widSettingProperty').show();" />
                                        <p:commandButton icon="ui-icon-minusthick" update="propertyDT" value="Eliminar" action="#{propertySectionView.deleteProperty()}" />
                                    </f:facet>
                                </p:dataTable>
                            </p:column>

                        </p:row>

                        <p:row>
                            <p:column style="font-weight: bold;">

                                <p:outputPanel style="">

                                    <p:commandButton value="Guardar" style=""
                                                     icon="ui-icon-plusthick" update="" disabled="true"/>

                                    <p:commandButton value="Asociar" style="margin-bottom: 10px"
                                                     icon="ui-icon-plusthick" action="#{templateToolVO.associatePropertyTemplate()}"
                                                     update="templateTree templName winMessageId" />

                                    <p:commandButton value="Eliminar" action="#{templateTreeVO.deleteTemplate()}"
                                                     icon="ui-icon-minusthick" update="templateTree templName winMessageId" />
                                </p:outputPanel>

                            </p:column>

                        </p:row>

                        <f:facet name="footer">
                            <p:row>
                                <p:column  colspan="7" style="text-align: right">
                                    Derechos Reservados
                                </p:column>
                            </p:row>
                        </f:facet>
                    </p:panelGrid>
                </p:layoutUnit>
                <p:dialog id="widSettPropId" header="Modal Dialog" widgetVar="widSettingProperty" modal="false" showEffect="fade" hideEffect="fade" resizable="false" style="top:30%">

                    <p:tabView id="tabSetting" scrollable="true" cache="false" style="margin:auto;margin-top:3%;width:600px;">
                        <p:tab title="Visualizador">
                            <ui:include src="viwerProperty.xhtml" />
                        </p:tab>
                        <p:tab title="Lista de Valores">
                            <ui:include src="valueListProperty.xhtml" />
                        </p:tab>
                    </p:tabView>

                    <p:outputPanel style="width: 100%;overflow: auto;display: block">
                        <p:commandButton value="Guardar" style="margin: 1% 3% 3% 33%"  action="#{propertySectionView.updateProperty()}" icon="ui-icon-plusthick"/>
                        <p:commandButton value="Cancelar" icon="ui-icon-cancel" onclick="PF('widSettingProperty').hide();" type="button" />
                    </p:outputPanel>

                </p:dialog>

                <p:growl id="winMessageId" showDetail="true" sticky="true" />

            </h:form>
        </p:layout>

    </h:body>

</f:view>
</html>

